<div class="bg-accent h-full w-full">
    <div class="flex flex-row items-start">
        <div>
            <img src="/assets/icons/logolili2.svg" alt="arrow" class="w-32 h-8 md:w-32 md:h-10">
        </div>

    </div>
    <div>
        <div class="flex flex-col items-center text-center">
            <h1 class="text-xl md:text-2xl font-bold text-white">LIBRO DE RECLAMACIONES</h1>
            <p class="text-xs md:text-sm text-white">Formulario Virtual para Quejas y Reclamos</p>
        </div>
    </div>
    <p-card styleClass="m-4 md:m-8">
        <div class="italic border-[1px] border-gray-300 rounded-md p-4 bg-accent-soft">
            <p class="text-sm text-gray-500">Estimado consumidor: Conforme al Código de Protección y Defensa del
                Consumidor, este Libro de
                Reclamaciones Virtual se encuentra a tu disposición. Aquí podrás registrar tu reclamo o queja respecto a
                los productos o servicios ofrecidos.
                El proveedor deberá dar respuesta en un plazo máximo de 15 días hábiles.
                Al finalizar, recibirás una copia automática en tu correo electrónico.
                Este registro no limita tu derecho a acudir a Indecopi.</p>
        </div>
        <div class="flex flex-col mt-12 gap-6">
            <div>
                <h1 class="text-lg md:text-xl text-gray-500 font-medium">1. Datos del Consumidor Reclamante</h1>
            </div>
            <div class="w-full">
                <div class="flex flex-col md:flex-row justify-between gap-2 w-full md:w-1/2">
                    <div class="w-full md:w-auto">
                        <label for="tipodocumento" class="text-sm font-medium text-gray-700">Tipo de documento</label>
                        <p-dropdown 
                            [options]="tiposDocumento" 
                            [(ngModel)]="tipoDocumentoSeleccionado"
                            optionLabel="label"
                            styleClass="w-full" 
                            placeholder="Seleccione tipo de documento"
                            [showClear]="true">
                        </p-dropdown>
                    </div>
                    <div class="w-full md:w-auto">
                        <label for="numerodocumento" class="text-sm font-medium text-gray-700">Número de
                            documento</label>
                        <input pInputText id="numerodocumento" type="text" class="w-full p-2 border border-gray-300 rounded-md"
                            aria-describedby="username-help" [(ngModel)]="numeroDocumento" />
                    </div>
                </div>

                <div class="w-full md:w-1/2">
                    <label for="nombrecompleto" class="text-sm font-medium text-gray-700">Nombre completo</label>
                    <input pInputText id="nombrecompleto" class="w-full p-2 border border-gray-300 rounded-md"
                        aria-describedby="username-help" [(ngModel)]="nombreCompleto" />
                </div>

                <div class="flex flex-col md:flex-row justify-between gap-2 w-full md:w-1/2">
                    <div class="w-full md:w-auto">
                        <label for="telefono" class="text-sm font-medium text-gray-700">Teléfono</label>
                        <input pInputText id="telefono" type="tel" class="w-full p-2 border border-gray-300 rounded-md"
                            aria-describedby="username-help" [(ngModel)]="telefono" />
                    </div>
                    <div class="w-full md:w-auto">
                        <label for="correo" class="text-sm font-medium text-gray-700">Correo
                            electrónico</label>
                        <input pInputText id="correo" type="email" class="w-full p-2 border border-gray-300 rounded-md"
                            aria-describedby="username-help" [(ngModel)]="correo" />
                    </div>
                </div>

                <div class="flex flex-col md:flex-row justify-between gap-2 w-full md:w-1/2 mt-6">
                    <!-- Dropdown de DEPARTAMENTO -->
                    <div class="w-full">
                        <label for="departamento" class="text-sm font-medium text-gray-700">Departamento</label>
                        <div class="w-full">
                            <p-dropdown 
                                [options]="departamentosDisponibles" 
                                [(ngModel)]="departamentoSeleccionado"
                                optionLabel="nombre"
                                styleClass="w-full" 
                                placeholder="Seleccione un departamento"
                                (onChange)="onDepartamentoChange($event.value)"
                                [showClear]="true">
                            </p-dropdown>
                        </div>
                    </div>

                    <!-- Dropdown de PROVINCIA -->
                    <div class="w-full">
                        <label for="provincia" class="text-sm font-medium text-gray-700">Provincia</label>
                        <div class="w-full">
                            <p-dropdown 
                                [options]="provinciasDisponibles" 
                                [(ngModel)]="provinciaSeleccionada"
                                optionLabel="nombre"
                                styleClass="w-full" 
                                placeholder="Seleccione una provincia"
                                (onChange)="onProvinciaChange($event.value)"
                                [disabled]="!departamentoSeleccionado"
                                [showClear]="true">
                            </p-dropdown>
                        </div>
                    </div>

                    <!-- Dropdown de DISTRITO -->
                    <div class="w-full">
                        <label for="distrito" class="text-sm font-medium text-gray-700">Distrito</label>
                        <div class="w-full">
                            <p-dropdown 
                                [options]="distritosDisponibles" 
                                [(ngModel)]="distritoSeleccionado"
                                optionLabel="nombre"
                                styleClass="w-full" 
                                placeholder="Seleccione un distrito"
                                (onChange)="onDistritoChange($event.value)"
                                [disabled]="!provinciaSeleccionada"
                                [showClear]="true">
                            </p-dropdown>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 mt-4">
                    <label for="direccion" class="text-sm font-medium text-gray-700">Dirección (opcional)</label>
                    <input pInputText id="direccion" class="w-full p-2 border border-gray-300 rounded-md"
                        aria-describedby="username-help" [(ngModel)]="direccion" placeholder="Ej: Av. Principal 123" />
                </div>
                <div class="mt-4">
                    <h1 class="text-lg md:text-xl text-gray-500 font-medium">2. Detalle de reclamación</h1>
                </div>
                <div class="w-full md:w-1/3">
                    <label for="tiporeclamacion" class="text-sm font-medium text-gray-700">Tipo</label>
                    <p-dropdown 
                        [options]="tiposReclamacion" 
                        [(ngModel)]="tipoReclamacionSeleccionado"
                        optionLabel="label"
                        styleClass="w-full" 
                        placeholder="Seleccione tipo de reclamación"
                        [showClear]="true">
                    </p-dropdown>
                </div>
                <div class="w-full md:w-1/2">
                    <label for="detalle" class="text-sm font-medium text-gray-700">Detalle</label>
                    <textarea pInputTextarea id="detalle" rows="4" class="w-full p-2 border border-gray-300 rounded-md"
                        aria-describedby="username-help" [(ngModel)]="detalle" placeholder="Describa su reclamo o queja..."></textarea>
                </div>
                <div class="w-full md:w-1/2">
                    <label for="pedidoconsumidor" class="text-sm font-medium text-gray-700">Pedido del consumidor (opcional)</label>
                    <textarea pInputTextarea id="pedidoconsumidor" rows="3" class="w-full p-2 border border-gray-300 rounded-md"
                        aria-describedby="username-help" [(ngModel)]="pedidoConsumidor" placeholder="¿Qué solución espera?"></textarea>
                </div>
            </div>
        </div>
        <div class="flex flex-col items-start gap-2 mt-4">
            <div class="border border-gray-300 rounded-md p-2">
                <p-checkbox 
                    [(ngModel)]="aceptaTerminos" 
                    [binary]="true" 
                    inputId="terminos"
                    label=" Declaro haber leído y aceptado los  Términos y Condiciones." />
            </div>
            <div class="border border-gray-300 rounded-md p-2">
                <p-checkbox 
                    [(ngModel)]="aceptaPrivacidad" 
                    [binary]="true" 
                    inputId="privacidad"
                    label=" Autorizo el tratamiento de mis datos personales conforme a las  Políticas de Privacidad." />
            </div>
        </div>
        <div class="w-full md:w-1/2 mx-auto mt-6">
            <app-button design="primary" size="large" [fullWidth]="true" (onClick)="enviarReclamo()">
                Enviar
            </app-button>
        </div>
    </p-card>
    
    <app-confirmacion-dialog 
        #confirmacionDialog
        (onConfirm)="onConfirmarFinalizar()"
        (onCancel)="onCancelarFinalizar()">
    </app-confirmacion-dialog>
    
    <app-finalizar-dialog #finalizarDialog></app-finalizar-dialog>
</div>